var width=$(window).width();var currentNode=null;var editState=undefined;var editNode=null;var selectNodeId=null;var selectParentId=null;$(function(){});function nodeOnClick(node){if(typeof(initFormContent)=="function"){currentNode=node.attributes;var record=initFormContent(node.attributes);initFormData(record)}else{layer.msg("请在模块JS里面实现initFormContent方法，返回节点的数据集。",{icon:2})}}function addNextNode(title){if(currentNode){var id=currentNode.TREEID;var pid=currentNode.TREEPARENTID;resetFormData()}else{layer.msg("请先选择一个"+title,{icon:2})}}function addChildNode(title){if(currentNode){var id=currentNode.TREEID;var pid=currentNode.TREEPARENTID;currentNode.TREEPARENTID=id;currentNode.TREEID="";resetFormData()}else{layer.msg("请先选择一个"+title,{icon:2})}}function preSaveFormData(){params=$.extend(params,currentNode)}function delTreeNode(dataset,title){if(currentNode){params=$.extend(params,currentNode);executeDataInterface(dataset,title,params,function(){refreshLeftTree()})}else{layer.msg("请先选择一个"+title,{icon:2})}}function refreshLeftTree(){refreshTree(currentNode);currentNode=null;resetFormData()}